(function(a){a.fn.jalendar=function(v){var I=a.extend({customDay:new Date(),color:"#3aa4d1",color2:"",lang:"EN",type:"",customUrl:"#",dateType:"dd-mm-yyyy",dayWithZero:true,monthWithZero:true,sundayStart:false,dayColor:null,titleColor:null,weekColor:null,todayColor:null,eventH3Color:null,eventColor1:null,eventColor2:null,eventColor3:null,eventColor4:null,eventColor5:null,eventColor6:null,totalbarColor:null,selectingBeforeToday:false,selectingAfterToday:false,done:null},v);var h={};var j={};var u={};var n={};h.EN=new Array("Mon","Tue","Wed","Thu","Fri","Sat","Sun");h.TR=new Array("Pzt","Sal","Çar","Per","Cum","Cmt","Pzr");h.ES=new Array("Lun","Mar","Mié","Jue","Vie","Såb","Dom");h.DE=new Array("Mon","Die","Mit","Don","Fre","Sam","Son");h.FR=new Array("Lun","Mar","Mer","Jeu","Ven","Sam","Dim");h.IT=new Array("Lun","Mar","Mer","Gio","Ven","Sab","Dim");h.FIL=new Array("Lun","Mar","Miy","Huw","Biy","Sab","Lin");h.RU=new Array("Пн","Вт","Ср","Чт","Пт","Сб","Вс");h.NL=new Array("Ma","Di","Wo","Do","Vr","Za","Zo");h.ZH=new Array("星期一","星期二","星期三","星期四","星期五","星期六","星期天");h.HI=new Array("रविवार","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार");h.PT=new Array("Se","Te","Qu","Qu","Se","Sa","Do");h.PL=new Array("po","wt","sr","cz","pi","so","ni");j.EN=new Array("January","February","March","April","May","June","July","August","September","October","November","December");j.TR=new Array("Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık");j.ES=new Array("Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre");j.DE=new Array("Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember");j.FR=new Array("Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aoút","Septembre","Octobre","Novembre","Décembre");j.IT=new Array("Gennaio","Febbraio","Marzo","Aprile","Maggio","Guigno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre");j.FIL=new Array("Enero","Pebrero","Marso","Abril","Mayo","Hunyo","Hulyo","Agosto","Setyembre","Oktubre","Nobyembre","Disyembre");j.RU=new Array("Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь");j.NL=new Array("januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december");j.ZH=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月");j.HI=new Array("जनवरी","फरवरी","मार्च","अप्रैल","मई","जून","जुलाई","अगस्त","सितंबर","अक्टूबर","नवंबर","दिसंबर");j.PT=new Array("Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro");j.PL=new Array("styczen","luty","marzec","kwiecien","maj","czerwiec","lipiec","sierpien","wrzesien","pazdziernik","listopad","grudzien");u.EN="Event(s)";u.TR="Etkinlik";u.ES="Evento(s)";u.DE="Tätigkeit";u.FR="Activité(s)";u.IT="Attività";u.FIL="Aktibidad";u.RU="Деятельность";u.NL="Activiteit(en)";u.ZH="事件";u.HI="परिणाम";u.PT="Eventos";u.PL="Działalność";n.EN="Close";n.TR="Kapat";n.ES="Cerrar";n.DE="Schließen";n.FR="Fermer";n.IT="Chiudere";n.FIL="Isara";n.RU="Закрывать";n.NL="Sluiten";n.ZH="關閉";n.HI="बंद करे";n.PT="Fechar";n.PL="Zamknąć";var C=new Date(),z=C.getDate(),K=C.getMonth(),E=C.getFullYear();var m=a(this);var J=function(i,d){return a(document.createElement(i)).addClass(d)};var s=I.color2===""?I.color:I.color2;m.append(a('<input type="hidden" class="data1" /><input type="hidden" class="data2" />'),J("div","jalendar-container").append(J("div","jalendar-pages").append(J("div","header").append(J("a","prv-m").append(J("i","fa fa-angle-left")),J("h1"),J("a","nxt-m").append(J("i","fa fa-angle-right")),J("div","day-names")),J("div","days"),J("div","add-event").append(J("div","events").append(J("h3","").html("<span></span> "+u[I.lang]),J("div","events-list")),J("div","close-button").text(n[I.lang]))).attr("style","background-color:"+I.color+"; background: -webkit-gradient(linear, left top, left bottom, from("+I.color+"), to("+s+")); background: -webkit-linear-gradient(top, "+I.color+", "+s+"); background : -moz-linear-gradient(top, "+I.color+", "+s+"); background: -ms-linear-gradient(top, "+I.color+", "+s+"); background: -o-linear-gradient(top, "+I.color+", "+s+");")));if(I.type=="range"){m.find(".jalendar-pages").addClass("range").append(J("input","first-range-data").attr({type:"hidden"}),J("input","last-range-data").attr({type:"hidden"}))}for(var G=0;G<42;G++){m.find(".days").append(J("div","day"))}var O=0;if(I.sundayStart==true){m.find(".day-names").append(J("h2").text(h[I.lang][6]));O=1}for(var G=O;G<7;G++){m.find(".day-names").append(J("h2").text(h[I.lang][G-O]))}var L=new Date(I.customDay);var f=L.getFullYear();var H=L.getDate();var b=L.getMonth();var q=function(d){var i=new Date();i.setYear(d);i.setMonth(1);i.setDate(29);return i.getDate()==29};var k;var y=function(d){if(q(f)===true){d=29}else{d=28}return d};var D=new Array(31,y(k),31,30,31,30,31,31,30,31,30,31);var l=null,e=null,g=null,A=null,t=null,x=null;function M(){D[1]=y(k);var d=new Date();d.setFullYear(f,b,0);var R=d.getDay()+O;m.find(".header h1").html(j[I.lang][b]+" "+f+'<div class="total-bar"></div>');m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event disable-selecting");m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event1 disable-selecting");m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event2 disable-selecting");m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event3 disable-selecting");m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event4 disable-selecting");m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event5 disable-selecting");m.find(".day").html(" ").removeAttr("data-date").removeClass("this-month have-event6 disable-selecting");for(var Q=0;Q<42-(R+D[b]);Q++){m.find(".day").eq(R+D[b]+Q).html("<span>"+(Q+1)+"</span>")}for(var Q=0;Q<R;Q++){var P=D[b-1]==undefined?D[11]:D[b-1];m.find(".day").eq(Q).html("<span>"+(P-R+(Q+1))+"</span>")}for(var Q=1;Q<=D[b];Q++){R++;var V;var T=(b+1);if(I.dayWithZero===true){Q=Q<10?"0"+Q:Q}if(I.monthWithZero===true){T=b<9?"0"+(b+1):(b+1)}if(I.dateType=="dd-mm-yyyy"){V=Q+"-"+T+"-"+f}else{if(I.dateType=="mm-dd-yyyy"){V=T+"-"+Q+"-"+f}else{if(I.dateType=="yyyy-mm-dd"){V=f+"-"+T+"-"+Q}else{if(I.dateType=="yyyy-dd-mm"){V=f+"-"+Q+"-"+T}}}}if(I.type=="linker"){m.find(".day").eq(R-1).addClass("this-month").attr("data-date",V).html('<span><a href="'+I.customUrl+V+'">'+Q+"</a></span>")}else{m.find(".day").eq(R-1).addClass("this-month").attr("data-date",V).html("<span>"+Q+"</span>")}var U=(Math.round(new Date(f+"/"+(b+1)+"/"+Q+" 00:00:00").getTime()/1000));var S=(Math.round(new Date(E+"/"+(K+1)+"/"+z+" 00:00:00").getTime()/1000));if(I.selectingBeforeToday==true){if(U>S){m.find(".day").eq(R-1).addClass("disable-selecting")}}if(I.selectingAfterToday==true){if(U<S){m.find(".day").eq(R-1).addClass("disable-selecting")}}m.find(".days").attr("data-month",T).attr("data-year",f)}if(b==L.getMonth()&&f==L.getFullYear()){m.find(".day.this-month").removeClass("today").eq(H-1).addClass("today")}else{m.find(".day.this-month").removeClass("today").attr("style","")}m.find(".added-event.type0").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type0").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type0").addClass("have-event")});m.find(".added-event.type1").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type1").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type1").addClass("have-event1")});m.find(".added-event.type2").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type2").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type2").addClass("have-event2")});m.find(".added-event.type3").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type3").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type3").addClass("have-event3")});m.find(".added-event.type4").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type4").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type4").addClass("have-event4")});m.find(".added-event.type5").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type5").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type5").addClass("have-event5")});m.find(".added-event.type6").each(function(W){a(this).attr("data-id",W);var X=a(this).attr("data-date");m.find('.this-month[data-date="'+X+'"]').append(J("div","event-single type6").attr("data-id",W).append(J("a","").attr("href",a(this).attr("data-link")).attr("target","blank").text(a(this).attr("data-title"))));m.find(".day").has(".type6").addClass("have-event6")});F();if(I.dayColor!==null){m.find(".day span, .day span a").css({color:I.dayColor})}if(I.titleColor!==null){m.find(".header h1, .header .prv-m, .header .nxt-m, .event-single p, h3, .close-button").css({color:I.titleColor})}if(I.weekColor!==null){m.find("h2").css({color:I.weekColor})}if(I.todayColor!==null){m.find(".day.this-month.today span, .day.this-month.today span a").css({color:I.todayColor})}if(I.totalbarColor!==null){m.find(".total-bar").css({"background-color":I.totalbarColor})}if(I.eventH3Color!==null){m.find(".events h3").css({color:I.eventH3Color})}if(I.eventColor1!==null){m.find(".have-event1 span").css({"background-color":I.eventColor1})}if(I.eventColor2!==null){m.find(".have-event2 span").css({"background-color":I.eventColor2})}if(I.eventColor3!==null){m.find(".have-event3 span").css({"background-color":I.eventColor3})}if(I.eventColor4!==null){m.find(".have-event4 span").css({"background-color":I.eventColor4})}if(I.eventColor5!==null){m.find(".have-event5 span").css({"background-color":I.eventColor5})}if(I.eventColor6!==null){m.find(".have-event6 span").css({"background-color":I.eventColor6})}if(I.color=="#fff"||I.color=="#ffffff"||I.color=="white"){m.find(".header h1, .header .prv-m, .header .nxt-m, .day.today span, h2, .event-single p, h3, .close-button").css({"text-shadow":"none"})}}M();var B=new Array(m.find(".prv-m"),m.find(".nxt-m"));var p=m.find(".jalendar .close-button");function F(){var d=m.find(".this-month .event-single").length;if(d==0){m.find(".total-bar").hide(0)}m.find(".total-bar").text(d);m.find(".events h3 span").text(a(".jalendar .day.selected .event-single").length);var i=a(".jalendar .day.selected .event-single").length;m.find(".events h3 span").text(i)}function c(){m.find(".day").removeClass("selected").removeAttr("style");m.find(".add-event").removeClass("selected").height(0)}function N(){m.find(".day").removeClass("first-range range last-range");if(l!==null){if(m.find('[data-date="'+w.val()+'"]').length==0){if(g<Number(m.find(".days").attr("data-month"))&&t>=Number(m.find(".days").attr("data-year"))||t<Number(m.find(".days").attr("data-year"))){l=0}else{if(g>Number(m.find(".days").attr("data-month"))&&t<=Number(m.find(".days").attr("data-year"))||t>Number(m.find(".days").attr("data-year"))){l=42}}if(e!==null){if(t==x&&g==A){return false}var i=parseInt(m.find(".days").attr("data-year"),10),d=parseInt(m.find(".days").attr("data-month"),10);if(t<i&&x>i||A>d&&x>=i&&t<i||g<d&&t==i&&A>d&&x==i||g<d&&x>i&&t==i||g<d&&t==i&&A>d&&x>=i){m.find(".day").addClass("range")}}}else{l=m.find('[data-date="'+w.val()+'"]').index()}}}function o(){m.find('.day[data-date="'+w.val()+'"]').addClass("first-range");m.find('.day[data-date="'+r.val()+'"]').addClass("last-range");m.find('.day[data-date="'+w.val()+'"]').nextUntil('.day[data-date="'+r.val()+'"]').addClass("range");if(m.find('.day[data-date="'+r.val()+'"]').length>0){if(m.find(".day.first-range").length>0){m.find(".day.first-range").nextUntil(".day.last-range").addClass("range")}else{m.find(".day:eq("+l+")").nextUntil(".day.last-range").addClass("range");if(l==0){m.find(".day:eq(0)").addClass("range")}}}}var w=m.find("input.first-range-data"),r=m.find("input.last-range-data");B[1].on("click",function(){if(b>=11){b=0;f++}else{b++}M();c();if(I.type=="range"){N();o()}});B[0].on("click",function(){dayClick=m.find(".this-month");if(b===0){b=11;f--}else{b--}M();c();if(I.type=="range"){N();o()}});m.on("click",".close-button",function(d){d.preventDefault();m.find(".add-event").removeClass("selected").height(0);m.find(".this-month.selected").removeClass("selected")});m.on("click",".this-month:not(.disable-selecting)",function(){if(I.type=="selector"){a(this).parent().find(".selected").removeClass("selected");a(this).addClass("selected");m.find("input.data1").val(m.find(".this-month.selected").attr("data-date"));if(m.parent().is(".jalendar-input")){m.parent().find("input").removeClass("selected");m.parent(".jalendar-input").find("input").val(a(this).data("date"))}if(I.done!==null){I.done.call(this)}return false}if(I.type=="range"){var d=a(this).parent().find(".first-range"),Q=a(this).parent().find(".last-range");function P(S){S.parent().find(".day").removeClass("first-range").removeClass("range").removeClass("last-range");S.addClass("first-range");w.val(S.attr("data-date"));l=m.find('[data-date="'+m.find(".first-range").attr("data-date")+'"]').index();g=Number(m.find(".days").attr("data-month"));t=Number(m.find(".days").attr("data-year"));e=null;r.val("")}function i(S){S.addClass("last-range");r.val(S.attr("data-date"));e=m.find(".last-range").index();A=Number(m.find(".days").attr("data-month"));x=Number(m.find(".days").attr("data-year"))}if(l!==null){if(e!==null){P(a(this))}else{if(l>a(this).index()){P(a(this));return false}i(a(this));m.find("input.data1").val(w.val());m.find("input.data2").val(r.val());if(m.parent().is(".jalendar-input")){m.parent().find("input").removeClass("selected");m.parent(".jalendar-input").find("input").val(m.find("input.data1").val()+", "+m.find("input.data2").val())}if(I.done!==null){I.done.call(this)}}}else{P(a(this))}m.on({mouseenter:function(){if(l===null){return false}if(r.val()===""){m.find(".day").removeClass("range last-range");if(a(this).index()>l){if(a(this).hasClass("this-month")){a(this).addClass("last-range");a(this).parent().find(".day:eq("+l+")").nextUntil(".this-month.last-range").addClass("range");if(l==0){a(this).parent().find(".day:eq(0)").addClass("range")}}}}},mouseleave:function(){if(r.val()===""){a(this).parent().find(".day").removeClass("last-range").removeClass("range")}}},".range .day.this-month");return false}var R=a(this).find(".event-single");m.find(".events .event-single").remove();c();if(I.type===""){m.find("input.data1").val(a(this).data("date"));a(this).addClass("selected");m.find(".add-event").find(".events-list").html(R.clone());if(m.parent().is(".jalendar-input")){m.parent(".jalendar-input").find("input").val(a(this).data("date"))}m.find(".events h3 span").html(m.find(".events .event-single").size());m.find(".add-event").addClass("selected").height(m.find(".add-event .events").height()+59)}});if(m.parent().is(".jalendar-input")){m.parent(".jalendar-input").find('input[type="text"], .jalendar').on("click",function(d){d.stopPropagation();a(this).addClass("selected")})}a("html").on("click",function(){a(".jalendar-input input").removeClass("selected")})}})(jQuery);