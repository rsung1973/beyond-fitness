

@using System.IO
@using System.Linq.Expressions

@using WebHome.Helper
@using WebHome.Models.Locale
@using WebHome.Models.Locale
@using WebHome.Models.ViewModel
@using WebHome.Models.DataEntity
@using WebHome.Models.Timeline
@using WebHome.Controllers
@using Newtonsoft.Json
<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <title>BEYOND FITNESS - å…Œæ›æˆ‘çš„è£å‚™</title>
      <!-- CSS  -->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!-- materialize  -->
      <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
      <!-- livIconsevo  -->
      <link href='css/livIconsevo/LivIconsEvo.css' rel='stylesheet' type='text/css'>
      <link href="css/livIconsevo/LivIconsEvo.css" rel="stylesheet" type="text/css">
      <!-- scrollup-master  -->
      <link href="css/scrollup-master/themes/image.css?1.1" rel="stylesheet" id="scrollUpTheme">
      
      <!-- STYLE è¦æ”¾æœ€ä¸‹é¢  -->
      <link href="css/style.css?1.1" type="text/css" rel="stylesheet" media="screen,projection"/>
                 <link rel="icon" href="favicons/favicon_96x96.png">
      <!-- Specifying a Webpage Icon for Web Clip -->
      <link rel="apple-touch-icon-precomposed" href="favicons/favicon_57x57.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="favicons/favicon_72x72.png">
      <link rel="apple-touch-icon-precomposed" sizes="114x114" href="favicons/favicon_114x114.png">
      <link rel="apple-touch-icon-precomposed" sizes="144x144" href="favicons/favicon_144x144.png">
      <link rel="apple-touch-icon-precomposed" sizes="180x180" href="favicons/favicon_180x180.png">       

      <script src="js/libs/jquery-2.2.4.min.js"></script> 
      <script src="js/materialize.js"></script> 
      <script src="js/init.js"></script>
      <!-- LivIconsEvo  -->
      <script src="js/plugin/LivIconsEvo/tools/snap.svg-min.js"></script>
      <script src="js/plugin/LivIconsEvo/tools/TweenMax.min.js"></script>
      <script src="js/plugin/LivIconsEvo/tools/DrawSVGPlugin.min.js"></script>
      <script src="js/plugin/LivIconsEvo/tools/MorphSVGPlugin.min.js"></script>
      <script src="js/plugin/LivIconsEvo/tools/verge.min.js"></script>
      <script src="js/plugin/LivIconsEvo/LivIconsEvo.Tools.js"></script>
      <script src="js/plugin/LivIconsEvo/LivIconsEvo.defaults.js"></script>
      <script src="js/plugin/LivIconsEvo/LivIconsEvo.js"></script> 
      <!-- scrollup-master  -->
      <script src="js/plugin/scrollup-master/jquery.scrollUp.min.js"></script>
   </head>
   <body>
      <!--//é è¨­å€¼ç‚ºè—è‰² / è‹¥è¦è¨­å®šå¥³ç”Ÿ è«‹åŠ ä¸Š mode-girls /-->
      <div class="wrapper full-fixed">
         <div class="wrapper-fixed">
            <!--Header -->
            <nav class="white non-line" role="navigation">
               <div class="nav-wrapper container">
                  <!-- BACK --> 
                  @{ Html.RenderPartial("~/Views/CornerKick/Module/ReturnHome.ascx");}

                  <!-- // End of BACK --> 
                  <a id="logo-container" href="#" class="brand-logo toptitle center" >å…Œæ›æˆ‘çš„è£å‚™</a> 
               </div>
            </nav>
            <!-- // End of Header --> 
            <!-- main -->
            <div class="main">
               <div class="container">
                  <!--å“ç‰ŒLOGO -->
                  <!-- // End of å“ç‰ŒLOGO -->
                  <div class="registered-forms">
                     <!-- ç™»å…¥ - TAB -->
                     <ul id="tabs-swipe-demo" class="tabs col s12">
                        <li class="tab col s6"><a class="active" onclick="gtag('event', 'è£å‚™ç›®éŒ„', { 'event_category': 'é ç±¤é»æ“Š', 'event_label': 'å…Œæ›æˆ‘çš„è£å‚™'});"  href="#test-swipe-1">è£å‚™ç›®éŒ„</a></li>
                        <li class="tab col s6"><a onclick="gtag('event', 'å·²å…Œæ›è£å‚™', {  'event_category': 'é ç±¤é»æ“Š', 'event_label': 'å…Œæ›æˆ‘çš„è£å‚™'});" href="#test-swipe-2">å·²å…Œæ›è£å‚™</a></li>
                     </ul>
                     <div id="test-swipe-1" class="tab-content acc-content col s12">
                        <!-- QA info -->
                        <div class="point-content">
                           <div class="personal-info">
                              <div class="row valign-wrapper">
                                 <div class="col s4 m2">
                                     @{ var lesson = _model.RegisterLesson.OrderByDescending(r => r.RegisterID).First();
                                        var currentBonusPoint = _model.BonusPoint(models) ?? 0;}

                                     @{ ViewBag.ImgClass = "circle responsive-img valign";
                                            Html.RenderPartial("~/Views/CornerKick/Module/ProfileImage.ascx", lesson.ServingCoach.UserProfile);}

                                 </div>
                                 <div class="col s8 m10 text-box">
<!--                                    <span class="black-t18">åŠ‰åŠ è²</span>-->
                                    <span class="black-t12">æ¯ä¸€æšé‡‘å¹£éƒ½æ˜¯æ±—æ°´èˆ‡æ·šæ°´çš„çµæ™¶ï¼Œç›®å‰å·²ç´¯ç© <span class="point">@(currentBonusPoint)æš</span> BeyondğŸ’°ï¼ @(currentBonusPoint>35 ? "ç¹¼çºŒåŠªåŠ›ç´¯ç©ï¼Œé›†æ»¿100æšæœ‰ç¥ç§˜å¤§ç¦®å–”ï¼" : null)</span>
                                 </div>
                              </div>
                           </div>
                           <!-- é»æ•¸é¸æ“‡ -->
                           <div class="input-field col s12">
                              <select name="awarding">
                                 <option value="1" selected>ç·šä¸Šå…Œæ›</option>
                                 <option value="2">ç¾å ´å…Œæ›</option>
                              </select>
                               <script>
                                   function award() {
                                       if ($('select[name="awarding"]').val() == '1') {
                                           $('div.img-block.col.s12.m6.l6:has(span.online)').css('display', 'block');
                                           $('div.img-block.col.s12.m6.l6:has(span.offline)').css('display', 'none');
                                       } else {
                                           $('div.img-block.col.s12.m6.l6:has(span.online)').css('display', 'none');
                                           $('div.img-block.col.s12.m6.l6:has(span.offline)').css('display', 'block');
                                       }
                                   }

                                   $(function () {
                                       $('select[name="awarding"]').on('change', function (event) {
                                           award();
                                       });

                                       award();

                                   });
                               </script>
                           </div>
                           <!-- //End of é»æ•¸é¸æ“‡ -->
                           <div class="row">
                               @foreach (var item in models.GetTable<BonusAwardingItem>().Where(b=>!b.Status.HasValue || b.Status!=0)
                                       .OrderBy(b => b.PointValue))
                                   {
                              <!-- ï¼©ï¼­ï¼§ -->
                              <div class="img-block col s12 m6 l6">
                                 <div class="parallax-container">
                                    <div class="section no-pad-bot">
                                       <div class="container">
                                          <ul class="text-area">
                                             <li class="white-text left">@(item.ItemName)</li>
                                             <li class="right">
                                                 
                                                     @if (item.ExchangeableOnline == true)
                                                         {
                                                            if(currentBonusPoint>=item.PointValue)
                                                            { 
                                                                 if (item.BonusAwardingIndication != null && item.BonusAwardingIndication.Indication == "AwardingLessonGift")
                                                                 {
                                                                <span class="point-tag online" onclick="awardingLessonGift(@(item.ItemID));">@(item.PointValue)é» / ç«‹å³å…Œæ›</span>
                                                        }
                                                                else
                                                                {
                                                                <span class="point-tag online" onclick="exchangeBonus(@(item.ItemID));">@(item.PointValue)é» / ç«‹å³å…Œæ›</span>
                                                        }
                                                            }
                                                            else
                                                            {
                                                         <span class="point-tag online">@(item.PointValue)é»</span>
                                                         }
                                                        }
                                                        else
                                                        {
                                                     <span class="point-tag offline">@(item.PointValue)é»</span>
                                                     }
                                             </li>
                                          </ul>
                                       </div>
                                    </div>
                                    <div class="parallax"><img src="@(item.SampleUrl!=null ? VirtualPathUtility.ToAbsolute(item.SampleUrl) : null)" alt="Unsplashed background img 1"/></div>
                                 </div>
                              </div>
                              <!-- // End of ï¼©ï¼­ï¼§ -->  
                               } 
                           </div>
                           <!-- å•†å“ -->
                        </div>
                        <!--//End of QA info--> 
                     </div>
                     <div id="test-swipe-2" class="tab-content acc-content col s12">
                        <!-- QA info -->
                        <div class="point-content">
                            @if (_model.LearnerAward.Count > 0)
                                {
                           <div class="personal-info">
                              <div class="row valign-wrapper">
                                 <div class="col s4 m2">
                                    @{ ViewBag.ImgClass = "circle responsive-img valign";
                                      Html.RenderPartial("~/Views/CornerKick/Module/ProfileImage.ascx", _model);}

                                 </div>
                                 <div class="col s8 m10 text-box">
                                    <span class="black-t12">æ‚¨æˆªè‡³ç‚ºæ­¢å·²å…Œæ›çš„è£å‚™å¦‚ä¸‹ï¼Œç¹¼çºŒåŠªåŠ›ç´¯ç©BeyondğŸ’°ï¼Œè’é›†è£å‚™å§ï¼</span>
                                 </div>
                              </div>
                           </div>       
                                @foreach (var item in _model.LearnerAward)
                                    {
                            <!-- ï¼©ï¼­ï¼§ -->
                           <div class="img-block">
                              <div class="parallax-container">
                                 <div class="section no-pad-bot">
                                    <div class="container">
                                       <ul class="text-area">
                                          <li class="white-text left">@(item.BonusAwardingItem.ItemName)</li>
                                          <li class="right"></li>
                                       </ul>
                                    </div>
                                 </div>
                                 <div class="parallax"><img src="@(item.BonusAwardingItem.SampleUrl != null ? VirtualPathUtility.ToAbsolute(item.BonusAwardingItem.SampleUrl) : null)" alt="Unsplashed background img 1"></div>
                              </div>
                           </div>
                           <!-- // End of ï¼©ï¼­ï¼§ -->
                            }
                                }
                                else
                                { 
                            <img class="responsive-img nodata" src="images/nodata.png">
                            <p class="collection center">
                                <span class="gray-t16">Oooopsï¼ï¼è£å‚™ç­‰è‘—ä½ ä¾†æ›å–”ï¼</span>
                            }
                           <!-- å•é¡Œ -->
                        </div>
                        <!--//End of QA info--> 
                     </div>
                  </div>
                  <!-- //End of ç™»å…¥ - TAB --> 
               </div>
            </div>
            <!-- // End of main -->
         </div>
         <!--// End of wrapper-fixed--> 
      </div>
      <!--// End of wrapper--> 
      <!-- Footer --> 
      <!--<footer class="page-footer teal">
         <!-- // End of Footer --> 
      <!--  Scripts--> 
      <script>
         $(function () {
             $.scrollUp({
                 animation: 'fade',
                 
                 scrollImg: {
                     active: true,
                     type: 'background',
                     src: '../images/top.png'
                 }
             });
             //countup
             $('.countuptime').each(function() {
                 // no need to specify options unless they differ from the defaults
                 var target = this;
                 var endVal = parseInt($(this).attr('data-endVal'));
                 theAnimation = new countUp(target, 0, endVal, 0, 2.5);
                 theAnimation.start();
             });   
         
         });
         
             
      </script>     
   </body>
</html>
<script>
        var bonusItemID;
        function awardingLessonGift(itemID) {
            bonusItemID = itemID;
            showLoading();
            $.post('@(Url.Action("QueryRecipient","LearnerFacet"))', {}, function (data) {
                hideLoading();
                $(data).appendTo($('body'));
            });
        }

        function exchangeBonus(itemID,recipientID) {
            if (confirm('ç¢ºå®šå…Œæ›?')) {
                showLoading();
                $.post('@(Url.Action("ExchangeBonusPoint","LearnerFacet",new { uid = _model.UID }))', { 'itemID': itemID,'recipientID':recipientID }, function (data) {
                    hideLoading();
                    if (data.result) {
                        alert('å…Œæ›å®Œæˆ!!');
                        window.location.href = '@(Url.Action("CheckBonusPoint","CornerKick"))';
                    } else {
                        alert(data.message);
                    }
                });
            }
        }
</script>
@{ Html.RenderPartial("~/Views/Common/JQueryHelper.ascx");}

@{ Html.RenderPartial("~/Views/CornerKick/Module/ModeGirls.ascx",_model);}

@if (_viewModel?.LineID != null)
    {
<script>
    gtag('event', 'å·²å…Œæ›è£å‚™', {
        'event_category': 'å¡ç‰‡é»æ“Š',
        'event_label': 'LINEåœ–æ–‡é¸å–®'
    });
</script>
}
<script runat="server">

    ModelStateDictionary _modelState;
    ModelSource<UserProfile> models;
    UserProfile _model;
    RegisterViewModel _viewModel;

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        _modelState = (ModelStateDictionary)ViewBag.ModelState;
        models = ((SampleController<UserProfile>)ViewContext.Controller).DataSource;
        _model = (UserProfile)this.Model;
        _viewModel = ViewBag.ViewModel as RegisterViewModel;
    }

</script>