!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):jQuery)}(function(e){function d(g,c){return g.toFixed(c.decimals)}var f=function(a,c){this.$element=e(a),this.options=e.extend({},f.DEFAULTS,this.dataOptions(),c),this.init()};f.DEFAULTS={from:0,to:0,speed:1000,refreshInterval:100,decimals:0,formatter:d,onUpdate:null,onComplete:null},f.prototype.init=function(){this.value=this.options.from,this.loops=Math.ceil(this.options.speed/this.options.refreshInterval),this.loopCount=0,this.increment=(this.options.to-this.options.from)/this.loops},f.prototype.dataOptions=function(){var h={from:this.$element.data("from"),to:this.$element.data("to"),speed:this.$element.data("speed"),refreshInterval:this.$element.data("refresh-interval"),decimals:this.$element.data("decimals")},g=Object.keys(h);for(var j in g){var i=g[j];void 0===h[i]&&delete h[i]}return h},f.prototype.update=function(){this.value+=this.increment,this.loopCount++,this.render(),"function"==typeof this.options.onUpdate&&this.options.onUpdate.call(this.$element,this.value),this.loopCount>=this.loops&&(clearInterval(this.interval),this.value=this.options.to,"function"==typeof this.options.onComplete&&this.options.onComplete.call(this.$element,this.value))},f.prototype.render=function(){var b=this.options.formatter.call(this.$element,this.value,this.options);this.$element.text(b)},f.prototype.restart=function(){this.stop(),this.init(),this.start()},f.prototype.start=function(){this.stop(),this.render(),this.interval=setInterval(this.update.bind(this),this.options.refreshInterval)},f.prototype.stop=function(){this.interval&&clearInterval(this.interval)},f.prototype.toggle=function(){this.interval?this.stop():this.start()},e.fn.countTo=function(a){return this.each(function(){var k=e(this),j=k.data("countTo"),i=!j||"object"==typeof a,c="object"==typeof a?a:{},b="string"==typeof a?a:"start";i&&(j&&j.stop(),k.data("countTo",j=new f(this,c))),j[b].call(j)})}});